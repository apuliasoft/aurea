<section class="container-fluid" data-ng-controller="ClassRegistryCtrl" data-ng-init="init()">

  <script type="text/ng-template" id="selectTime.html">
    <div class="modal-header">
      <h3 class="modal-title">A che ora?</h3>
    </div>
    <div class="modal-body">
      <input type="time" class="form-control" data-ng-model="data.time">
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" ng-click="ok()">OK</button>
      <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
  </script>

  <div class="row">
    <div class="col-md-3">
      <div>
        <div class="btn-group pull-right">
          <button class="btn btn-danger" data-ng-click="toggleAbsents()" data-ng-disabled="noneSelected()">A</button>
          <button class="btn btn-success" data-ng-click="addLateEntrance()"
                  data-ng-disabled="!isValidEntranceSelection()">E
          </button>
          <button class="btn btn-warning" data-ng-click="addEarlyLeave()" data-ng-disabled="!isValidLeaveSelection()">
            U
          </button>
        </div>
        <h3>Alunni</h3>
      </div>
      <div class="list-group">
        <a href="" class="list-group-item"
           data-ng-repeat="student in classStudents | orderBy:['lastName', 'firstName']"
           data-ng-class="{active: student.selected}"
           data-ng-click="toggleStudentSelection(student)"
            >

          <div>
            <h6 class="pull-right text-warning" data-ng-if="studentHasLeft(student)"> U</h6>
            <h6 class="pull-right text-success" data-ng-if="studentHasEntered(student)"> E </h6>
            <h6 class="pull-right text-danger" data-ng-if="studentIsAbsent(student)">A </h6>

            <h5 class>{{ student | name:true}}</h5>
          </div>
        </a>
      </div>
    </div>
    <div class="col-md-9">

      <h2>Registro Di Classe</h2>

      <hr/>

      <div>
        <button class="btn btn-primary pull-left" data-ng-click="yesterday()"><i
            class="fa fa-arrow-circle-left"></i> Precedente
        </button>
        <button class="btn btn-primary pull-right" data-ng-click="tomorrow()">Successivo <i
            class="fa fa-arrow-circle-right"></i></button>
        <button class="btn center-block btn-default" datepicker-popup="EEEE, d MMMM yyyy" is-open="opened"
                data-ng-model="classRegistry.date" data-ng-click="open($event)" datepicker-options="dateOptions"
                show-button-bar="false" date-disabled="disabled(date, mode)">
          {{ classRegistry.date | date:'EEEE, d MMMM yyyy' }}
        </button>
        <!--<h3 class="text-center" datepicker-popup="EEEE, d MMMM yyyy" is-open="true" data-ng-model="classRegistry.date">-->
        <!--{{ classRegistry.date | date:'EEEE, d MMMM yyyy' }}</h3>-->
      </div>

      <form data-ng-submit="save()" novalidate>

        <table class="table">
          <thead>
          <tr>
            <th>Ora</th>
            <th>Materia</th>
            <th>Supplenza</th>
            <!--<th>Compresenze</th>-->
            <!--<th>Sostegni</th>-->
            <th>Argomento</th>
            <th>Note</th>
          </tr>
          </thead>
          <tbody>
          <tr data-ng-repeat="slot in classRegistry.slots | orderBy:'number'">
            <td>{{ slot.number | ordinalNumber}}</td>
            <td>
              <select data-ng-model="slot.teaching" id="teaching" name="teaching" class="form-control"
                      data-ng-options="teaching._id as teaching.name for teaching in teachings"></select>
            </td>
            <td>
              <select data-ng-model="slot.substitution" id="substitution" name="substitution"
                      class="form-control"
                      data-ng-options="teacher._id as teacher | name for teacher in teachers">
                <option></option>
              </select>
            </td>
            <!--<td>-->
            <!--<select data-ng-model="slot.assistantTeachers" id="assistantTeachers"-->
            <!--name="assistantTeachers"-->
            <!--class="form-control"-->
            <!--multiple data-ng-multiple="true"-->
            <!--data-ng-options="teacher._id as teacher | name for teacher in teachers">-->
            <!--</select>-->
            <!--</td>-->
            <!--<td>-->
            <!--<select data-ng-model="slot.supportTeachers" id="supportTeachers" name="supportTeachers"-->
            <!--class="form-control"-->
            <!--multiple data-ng-multiple="true"-->
            <!--data-ng-options="teacher._id as teacher | name for teacher in teachers">-->
            <!--</select>-->
            <!--</td>-->
            <td><input type="text" data-ng-model="slot.subject" class="form-control"></td>
            <td><input type="text" data-ng-model="slot.notes" class="form-control"></td>
          </tr>
          </tbody>
        </table>

        <hr>

        <nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
          <div class="container">
            <p class="navbar-text">
              Powered by <a href="http://www.apuliasoft.com" target="new">ApuliaSoft</a>
            </p>

            <div class="nav navbar-nav navbar-right btn-group">
              <button type="submit" class="btn btn-primary navbar-btn"
                      class="Salva">
                <i class="fa fa-check"></i> Salva
              </button>
            </div>
          </div>
        </nav>

      </form>
    </div>
  </div>

</section>